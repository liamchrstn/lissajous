<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lissajous Curves</title>
    <link rel="stylesheet" href="/src/main.css">
    <link rel="stylesheet" href="/src/grid.css">
    <link rel="stylesheet" href="/src/single.css">
  </head>
  <body>
    <header>
      <h1>Lissajous Curves</h1>
      <p>An interactive experiment of harmonic motion</p>
    </header>
    <div id="app"></div>
    <div class="controls-container">
      <button id="settingsButton" onclick="toggleSettings()">
        <i class="nf nf-fa-cog"></i>
      </button>
      <div class="controls">
        <button id="toggleLines" onclick="toggleGeneratorLines()" data-tooltip="Toggle Generator Lines">
          <i class="nf nf-md-draw"></i>
        </button>
        <button id="pauseButton" onclick="togglePause()" data-tooltip="Toggle Animation">
          <i class="nf nf-fa-pause"></i>
        </button>
        <div class="speed-control">
          <i class="nf nf-md-tortoise" data-tooltip="Slow Drawing Speed"></i>
          <input type="range" id="speed" name="speed" 
                 min="0.01" max="0.1" value="0.03" step="0.01"
                 oninput="updateSpeed(this.value)"
                 data-tooltip="Adjust Draw Speed">
          <i class="nf nf-md-rabbit" data-tooltip="Fast Drawing Speed"></i>
        </div>
      </div>
    </div>
    <section class="explanation">
      <p class="intro">A <a href="https://en.wikipedia.org/wiki/Lissajous_curve">Lissajous curve</a> graphs the intersection of two perpendicular sinusoidal inputs.
        The ratio of frequencies determines the curve's shape. Toggling the generator lines shows the individual sinusoidal inputs.</p>
      <button id="toggleSingleCurve" type="button" data-tooltip="Toggle Example Curve">
        <i class="nf nf-oct-chevron_down"></i>
      </button>
    </section>
    <div id="curve-section">
      <div class="collapsible-section collapsed">
        <div class="equations">
          <math xmlns="http://www.w3.org/1998/Math/MathML">
            <mi>x</mi><mo>=</mo><mi class="variable-a">A</mi><mo>sin</mo><mo>(</mo><mi class="freq-a">a</mi><mi class="variable-time">t</mi><mo>+</mo><mi class="variable-delta">δ</mi><mo>)</mo>
          </math>
          <math xmlns="http://www.w3.org/1998/Math/MathML">
            <mi>y</mi><mo>=</mo><mi class="variable-b">B</mi><mo>sin</mo><mo>(</mo><mi class="freq-b">b</mi><mi class="variable-time">t</mi><mo>)</mo>
          </math>
        </div>
        <p class="equation-explanation">
          where <span class="variable-a">A</span>, <span class="variable-b">B</span> control amplitude, 
          <span class="freq-a">a</span> and <span class="freq-b">b</span> determine frequency ratio, 
          <span class="variable-time">t</span> is time, and 
          <span class="variable-delta">δ</span> sets phase difference.
        </p>
        <div class="slider-controls">
          <div class="button-row">
            <button id="randomizeParams" class="action-btn">
              <i class="nf nf-fa-random"></i> Randomize
            </button>
            <button id="resetParams" class="action-btn">
              <i class="nf nf-md-restore"></i> Reset
            </button>
          </div>
          <div class="controls-row">
            <div class="input-group">
              <label>A:</label>
              <input type="number" id="ampX" min="0.1" max="1" value="1" step="0.1">
              <button id="lockAmpX" class="lock-btn" data-tooltip="Lock Value">
                <i class="nf nf-fa-unlock"></i>
              </button>
            </div>
            <div class="input-group">
              <label>B:</label>
              <input type="number" id="ampY" min="0.1" max="1" value="1" step="0.1">
              <button id="lockAmpY" class="lock-btn" data-tooltip="Lock Value">
                <i class="nf nf-fa-unlock"></i>
              </button>
            </div>
          </div>
          <div class="controls-row">
            <div class="input-group with-play">
              <label>a:</label>
              <input type="number" id="freqX" min="0" max="10" value="3" step="0.1">
              <button id="lockFreqX" class="lock-btn" data-tooltip="Lock Value">
                <i class="nf nf-fa-unlock"></i>
              </button>
              <button id="playPauseFreqX" class="play-btn">
                <i class="nf nf-fa-play"></i>
              </button>
            </div>
            <div class="input-group with-play">
              <label>b:</label>
              <input type="number" id="freqY" min="0" max="10" value="2" step="0.1">
              <button id="lockFreqY" class="lock-btn" data-tooltip="Lock Value">
                <i class="nf nf-fa-unlock"></i>
              </button>
              <button id="playPauseFreqY" class="play-btn">
                <i class="nf nf-fa-play"></i>
              </button>
            </div>
          </div>
          <div class="controls-row">
            <div class="input-group with-play">
                <label data-tooltip="(π rad)">δ:</label>
              <input type="number" id="phase" min="0" max="2" value="0.5" step="0.1">
              <button id="lockPhase" class="lock-btn" data-tooltip="Lock Value">
                <i class="nf nf-fa-unlock"></i>
              </button>
              <button id="playPausePhase" class="play-btn">
                <i class="nf nf-fa-play"></i>
              </button>
            </div>
            <div class="input-group with-play">
              <label>t:</label>
              <input type="number" id="time" min="0" max="6.28" value="0" step="0.01">
              <button id="playPauseTime" class="play-btn">
                <i class="nf nf-fa-play"></i>
              </button>
              <button id="toggleTime" class="play-btn active" data-tooltip="Toggle Time Control">
                <i class="nf nf-fa-clock_o"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div id="single-curve" class="collapsed active">
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <script type="module" src="/src/InitialGrid.js"></script>
    <script type="module">
      import { toggleSingleCurve } from '/src/util.js';
      document.getElementById('toggleSingleCurve').onclick = toggleSingleCurve;
    </script>
    <script type="module" src="/src/2dsingle.js"></script>
    <footer>
      <p><a href="https://liamchristian.com">LiamC</a></p>
    </footer>
  </body>
</html>
